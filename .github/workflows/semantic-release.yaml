name: Semantic Release

on:
  push:
    branches:
      - main

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  semantic-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Required for semantic-release to work properly

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Semantic Release
        uses: cycjimmy/semantic-release-action@v3
        with:
          extra_args: --dry-run=false
          branch: main
          # Optional: Add custom rules if needed
          # rules:
          #   - type: fix
          #     release: patch
          #   - type: feat
          #     release: minor
          #   - type: perf
          #     release: patch
          #   - type: refactor
          #     release: patch
          #   - type: docs
          #     release: patch
          #   - type: style
          #     release: patch
          #   - type: test
          #     release: patch
          #   - type: chore
          #     release: patch
          #   - type: ci
          #     release: patch
          #   - type: build
          #     release: patch
          #   - type: revert
          #     release: patch
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
